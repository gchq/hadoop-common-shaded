language: java
jdk: oraclejdk8

script: ./travis.script.sh

# Push to GitHub releases - the key was generated by the Travis CLI.
deploy:
  provider: releases
  api_key:
    # travis encrypt -r gchq/hadoop-common-shaded <github personal access token>
    secure: tR4qSREkms8YrffCalE0oREwP6fjDIlZ74W4Y0C9a5k0r7jZcTdDbZP9uda0Fh6kcGW1li0E6YBjIh4Q9TI6UTWmUhzOUtl66ICiEyQHoYU4APIbzOb9xHl3v+3vz0LSxkUcg0TU7DGDUvOPx7MwI8hjtYu0m8yvcM2qFh2k7wKuHuCKf+y6MInheJ80FUdMgOhUqso1AkBa3KUbodRsP0AMUXt0Kle3SrWvFntUMvYKc//wHdvTM2eoDquUxhL19LeHUlDT4kel/dvjL7HXYRFFJdr8T22auVo2dmLVqXdaR43qKh9GaLAIGp63EQKruOg71h91Bb1+hw6HIp60jHWyGzyp09ZP5k4udFoYikO3/3Vny4XMtoLvGDqP1p1CrNiRjC4aUL7FkFU54ucdZOMOlEELAhiWN4xU7a7BxfBTcywWG7WVB+qA1v8oXEznoJ3MCuc/6yY3QXwMbcdC1UEWbe6AmaW3x5TtRyipUhDlp0TcGct3vgHd+zSXDytYftKSrXybCdboNdhpeKyzfamfHE+FrUysvbrklw7+l3vSPZZ2rsM0TheNkavIfQ3STExc7ZjK413lvX7TFlcSilJYSuIyX4xy4Xr2Bq2Ze5cRq5ZUTp0egXIIVokFMJakdT5O8oQGdUBGdAy0tXsqWdGOsv1gGH/pzwOy9d6dIvQ=
  file_glob: true
  file: build/libs/hadoop-common-shaded-*.jar
  skip_cleanup: true
  on:
    tags: true

cache:
  directories:
  - .autoconf
  - $HOME/.m2
  - $HOME/.gradle/wrapper
  - $HOME/.gradle/caches/
